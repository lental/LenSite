extends layout

block headvars
  - var title = "Blog"
  - var whyLogin = "Adding posts is restricted with OAuth"
  script
    include fragments/gplus.js
    include fragments/blog.js

block content
  include fragments/gbutton.jade
  .content#blog-content
    div.main-title
      h1 #{title}
    div.create-post.requires-login
      a(href='blog/createPost') Create New Post

    - for (var i in posts)
      .post
        h2.title #{posts[i].title} 
          span.permalink (
            a(href="blog/#{posts[i].id}") Permalink
            | )
        h3.date #{posts[i].created_at.toLocaleDateString()}, #{posts[i].created_at.toLocaleTimeString()}
        p.body #{posts[i].body}
    .footer
      input#initial(type='hidden' value='#{posts[0].id}')
      input#offset(type='hidden' value='#{posts.length}')
      button.show-more Show More Posts
      p â€¢ This blog is built on my homegrown 
        a(href='https://www.npmjs.com/package/node-mysql-blog-api') node-mysql-blog-api
        | . Check it out on 
        a(href='https://github.com/lental/node-mysql-blog-api') Github
        | .